{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./components/Controller.js","webpack:///./components/Calendar.js","webpack:///./components/Bubble.js","webpack:///./components/Progress.js","webpack:///./m/src/js/temp.js","webpack:///./components/Data.js","webpack:///./components/utils.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Controller","data","this","render","f","_addEvent","_removeEvent","Calendar","load","_getDate","currentDate","time","server_dtm","split","join","type","service_dtm","min_dtm","date","moment","format","entries","forEach","addEventListener","renderListner","Bubble","props","console","log","_render","N_PREV","N_NEXT","N_TODAY","Data","keywordList","progress_dtm","update_dtm","items","Map","v","url","path","KEYWORD_URL","fetch","then","response","json","error","res","update","inst","window","DATA","cc","bb","document","querySelector","timeLog","innerText","e","setAttribute","style","display","removeAttribute","addEvent","prev","next","today","set"],"mappings":"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","file":"test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default class Controller {\r\n  constructor(data) {\r\n    this.data = data;\r\n    this.render = null;\r\n  }\r\n\r\n\r\n  addEvent(f) {\r\n    this._addEvent(f);\r\n  }\r\n\r\n  removeEvent() {\r\n    this._removeEvent();\r\n  }\r\n\r\n  _addEvent() {\r\n    throw 'overwrite method'\r\n  }\r\n\r\n  _removeEvent() {\r\n    throw 'overwrite method'\r\n  }\r\n}","import Controller from \"./Controller\";\r\nexport default class Calendar extends Controller {\r\n  constructor(data) {\r\n    super(data);\r\n  }\r\n\r\n  prev() {\r\n    this.data.load(this._getDate('subtract'))\r\n  }\r\n\r\n  next() {\r\n    this.data.load(this._getDate('add'))\r\n  }\r\n\r\n  today() {\r\n    let currentDate = this.data.time.server_dtm.split(' ');\r\n    this.data.load(currentDate.join('%20'));\r\n  }\r\n\r\n  _getDate(type) {\r\n    let { service_dtm, min_dtm, server_dtm } = this.data.time,\r\n        date = (service_dtm).split(' ');\r\n\r\n    date[0] = moment(this.data.time.service_dtm)[type](1, 'days').format('YYYY-MM-DD');\r\n    /**\r\n     * 제약 사항: 최소, 최대 날짜에 해당 할 경우 핸들링 불가 설정\r\n     */\r\n    if (date[0] <= server_dtm.split(' ')[0] && date[0] >= min_dtm.split(' ')[0]) {\r\n      date = date.join('%20');\r\n      return date;\r\n    }\r\n    return server_dtm\r\n  }\r\n\r\n  _addEvent(p) {\r\n    Object.entries(p).forEach(([key,el]) => {\r\n      el.addEventListener('click', () => {\r\n        this[key]()\r\n      });\r\n    })\r\n  }\r\n\r\n\r\n\r\n}","import Controller from \"./Controller\";\r\nconst renderListner = Symbol();\r\n\r\nexport default class Bubble extends Controller {\r\n  constructor(props) {\r\n    super(props);\r\n    this[renderListner] = null;\r\n  }\r\n\r\n  _update() {\r\n    console.log('키워드 업데이트')\r\n    // 렌더 > 날짜 업데이트\r\n    this._render();\r\n  }\r\n\r\n  _render(f) {\r\n    if (this[renderListner] === null) {\r\n      if(!f) {\r\n        throw 'undefined callback function';\r\n      }\r\n      this[renderListner] = f;\r\n    } else {\r\n      this[renderListner].call(this)\r\n    }\r\n  }\r\n}","import Controller from \"./Controller\";\r\n\r\nconst renderListner = Symbol();\r\n\r\nexport default class Progress extends Controller {\r\n  constructor(name) {\r\n    super();\r\n    this[renderListner] = null;\r\n    this.target = name;\r\n    /**\r\n     * gsap.timeline API 참조\r\n     * drawSVG 프로퍼티: https://greensock.com/docs/v3/Plugins/DrawSVGPlugin 사용\r\n     */\r\n    this.timeline = null;\r\n    this.drag = null;\r\n    // 타임슬라이스 기준- 하루를 밀리세컨으로 변환 값(((1000 * 60) * 60) * 24) - (1000 * 60) // 23시간 59분 => 23시간으로 변경\r\n    this.ts = 86400000;  \r\n    // 현재 프로그래스 이동 값\r\n    this.current = null\r\n    // AM PM check\r\n    this.AMPM = null;\r\n  }\r\n  get covert() {\r\n    // 프로그래스 수치 > 타임스탬프 값으로 포멧 변환\r\n    return this.current * this.ts + this.timestamp.start;\r\n  }\r\n  get width() {\r\n    return d3.select(`${this.target} .progress`).attr('width')\r\n  }\r\n  get timestamp() {\r\n    let { min_dtm, progress_dtm, server_dtm, service_dtm } = this.data.time;\r\n    let st = `${server_dtm.split(' ')[0]} ${progress_dtm.split(' ').pop()}`;\r\n\r\n    let min = moment(min_dtm).valueOf(),\r\n        start = moment(st).startOf('day').valueOf(),\r\n        now = moment(progress_dtm).minutes(0).seconds(0).valueOf(),\r\n        server = moment(server_dtm).minutes(0).seconds(0).valueOf();\r\n\r\n    const limit_max = (_ => moment(server_dtm).format('YYYY-MM-DD')  === moment(service_dtm).format('YYYY-MM-DD') ? (server-start) / this.ts : 1)();\r\n\r\n    return {\r\n      start,\r\n      percent: (_=>{\r\n        let t = this.current === null ? (now - start) / this.ts : this.current;\r\n        return t > limit_max ? (server-start) / this.ts : t;\r\n      })(),\r\n      limit_min: moment(min_dtm).format('YYYY-MM-DD') === moment(service_dtm).format('YYYY-MM-DD') ? (min-start) / this.ts : 0,\r\n      limit_max\r\n    }\r\n  }\r\n\r\n  _update() {\r\n    console.log('키워드 업데이트');\r\n\r\n  }\r\n\r\n  _render(f) {\r\n    if (this[renderListner] === null) {\r\n      if(!f) {\r\n        throw 'undefined callback function';\r\n      }\r\n      this[renderListner] = f;\r\n    } else {\r\n      this[renderListner].call(this)\r\n    }\r\n  }\r\n\r\n  _updateTooltipTime() {\r\n    let { progress_dtm, service_dtm, server_dtm } = this.data.time,\r\n        isDrag = this.current !== null;\r\n    /* c = service_dtm >= server_dtm ? (_ => {\r\n       this.data.time.service_dtm = server_dtm;\r\n       return server_dtm\r\n     })() : this.covert,\r\n     r = isDrag ?  c : progress_dtm;*/\r\n    // AM PM check\r\n    if(moment(this.covert).format('HH:mm') !== '00:00') {\r\n      this.AMPM = moment(this.covert).format('A')\r\n    }\r\n\r\n    let zz = `${moment(service_dtm).format('YYYY-MM-DD')} ${ moment(isDrag ? this.covert : server_dtm).format('HH:mm:ss')}`;\r\n    /**\r\n     * data > 프로그래스 업데이트\r\n     * 프로그래스 범위가  00:00 ~ 다음날 00:00 까지 지정할 수 있으므로\r\n     * 다음날  00:00 드래그 후 달력 > 다음 날짜 로 업데이트시 하루 더 지난 상태로 업데이트 된다\r\n     * 만약 서버시간보다 초과하면 서버시간으로 변경한다.\r\n     */\r\n    if(zz.split(' ').pop() === '00:00:00' && this.AMPM === 'PM') {\r\n      let zzz = moment(progress_dtm).add(1, 'days').format('YYYY-MM-DD 00:00:00');\r\n      this.data.time.progress_dtm = zzz;\r\n      console.log(zzz, this.data.time)\r\n      this.AMPM = 'AM';\r\n    } else {\r\n      this.data.time.progress_dtm = zz;\r\n    }\r\n\r\n\r\n    d3.select('.timeText .hh').text(moment(zz).format('HH'));\r\n    d3.select('.timeText .mm').text(moment(zz).format('mm'));\r\n  }\r\n}","import { utils } from \"../../../components/utils\";\r\nimport Calendar from \"../../../components/Calendar\";\r\nimport Bubble from \"../../../components/Bubble\";\r\nimport Progress from \"../../../components/Progress\";\r\nimport TMP_PROGRESS from \"../../../tmp/TMP_PROGRESS\";\r\nimport Data from \"../../../components/Data\";\r\n\r\n\r\nwindow.DATA = new Data();\r\nwindow.cc = new Calendar(DATA);\r\nwindow.bb = new Bubble(DATA);\r\n\r\n(() => {\r\n  const N_PREV = document.querySelector('.btnTravel.prev'),\r\n        N_NEXT = document.querySelector('.btnTravel.next'),\r\n        N_TODAY = document.querySelector('.btnTravel.today');\r\n\r\n  cc.render = function(){\r\n    let { service_dtm, min_dtm, server_dtm, update_dtm } = this.data.time;\r\n    const timeLog = document.querySelector('.timeLog');\r\n    try {\r\n      timeLog.innerText = `${moment(update_dtm).format('YYYY.MM.DD HH:mm')}기준`;\r\n    } catch (e) {\r\n      console.log('.timeLog not found')\r\n    }\r\n\r\n    service_dtm = service_dtm.split(' ')[0];\r\n    min_dtm = min_dtm.split(' ')[0];\r\n    server_dtm = server_dtm.split(' ')[0];\r\n\r\n    console.log(service_dtm, min_dtm)\r\n    // 최신 날짜 일때\r\n    if (service_dtm >= server_dtm) {\r\n      N_NEXT.setAttribute('disabled', true);\r\n      N_TODAY.style.display = 'none';\r\n      // 안내문구 노출\r\n      timeLog.style.display = 'block';\r\n    } else if(service_dtm <= min_dtm) {\r\n      N_PREV.setAttribute('disabled', true)\r\n    } else {\r\n      N_NEXT.removeAttribute('disabled');\r\n      N_PREV.removeAttribute('disabled');\r\n      N_TODAY.style.display = 'inline-block';\r\n      timeLog.style.display = 'none';\r\n    }\r\n\r\n    // 날짜 변경\r\n    const t = service_dtm.split('-');\r\n    document.querySelector('.timeline .year').innerText = t[0];\r\n    document.querySelector('.timeline .month').innerText = t[1];\r\n    document.querySelector('.timeline .date').innerText = t[2];\r\n  };\r\n\r\n\r\n  cc.addEvent({\r\n    prev: N_PREV,\r\n    next: N_NEXT,\r\n    today: N_TODAY\r\n  });\r\n})();\r\n\r\n\r\n\r\n\r\n\r\nDATA.items.set('calendar', cc);\r\nDATA.load();\r\n\r\n\r\n// window.pp = new Progress('.progressWrap');\r\n\r\n/**\r\n * 달력 렌더러, 이전/오늘/다음 이벤트 발생시 렌더러 업데이트 됨\r\n */\r\n\r\n/*\r\ncc.addEvent({\r\n  prev: document.querySelector('.btnTravel.prev'),\r\n  next: document.querySelector('.btnTravel.next')\r\n});\r\ncc.render(function() {\r\n  let { service_dtm, min_dtm, server_dtm, update_dtm } = this.data.time;\r\n\r\n  const timeLog = document.querySelector('.timeLog');\r\n  try {\r\n    timeLog.innerText = `${moment(update_dtm).format('YYYY.MM.DD HH:mm')}기준`;\r\n  } catch (e) {\r\n    console.log('.timeLog not found')\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n});*/\r\n/*cc.render(function() {\r\n  let { service_dtm, min_dtm, server_dtm, update_dtm } = this.data.time;\r\n\r\n  service_dtm = service_dtm.split(' ')[0];\r\n  min_dtm = min_dtm.split(' ')[0];\r\n  server_dtm = server_dtm.split(' ')[0];\r\n\r\n  // 초기화\r\n  $('.calendar button').removeAttr('style');\r\n  $('.update-dtm').remove();\r\n\r\n  // 조건 확인, 버튼 노출 유/무\r\n  if (service_dtm >= server_dtm) {\r\n    document.querySelector('.calendar .next').style.display = 'none';\r\n    // 최신 키워드 기준 가이드문구\r\n    $('.timeLog').append(`<div class=\"update-dtm\">${moment(update_dtm).format('YYYY.MM.DD h:mm:ss')}기준</div>`);\r\n  } else if(service_dtm <= min_dtm) {\r\n    document.querySelector('.calendar .prev').style.display = 'none';\r\n  }\r\n  // 그리기\r\n  document.querySelector('.calendar .today').innerHTML = moment(service_dtm).format('YYYY.MM.DD'); // 2020.08.08 형식으로 변환\r\n  // 버블 인스턴스\r\n  bb.render();\r\n  // 프로그래스 인스턴스\r\n  pp.render();\r\n});*/\r\n\r\n\r\n// keyword update callback binding\r\n/*bb.render(function() {\r\n  $('#test .keyword').empty();\r\n  for(let [key, value] of Object.entries(this.data.keywordList)) {\r\n    let { keyword_service } = value;\r\n    $('#test .keyword').append(`<div  data-eq=\"sq${key}\">${keyword_service}</div>`)\r\n  }\r\n});*/\r\n\r\n/**\r\n * 프로그래스 렌더링 및 이벤트 바인딩\r\n */\r\n/*\r\npp.render(function() {\r\n  document.querySelector(this.target).innerHTML = TMP_PROGRESS;\r\n\r\n  let { percent, limit_max, limit_min } = this.timestamp,\r\n      { service_dtm, server_dtm } = this.data.time,\r\n      onThrowUpdate, onDrag, onDragEnd; // 드래그이벤트\r\n\r\n\r\n  gsap.set(`${this.target} .pathFront`, { clearProps: 'all' });\r\n  this.timeline = gsap.timeline({ defaults: { overwrite: 'auto', ease: 'none' }, paused: true });\r\n  this.timeline\r\n      // 프로그래스 선택영역 x값\r\n      .from(`${this.target} .pathFront`, {drawSVG: '0%'})\r\n      .to(`${this.target} .timeGroup`, {\r\n        scale: 1,\r\n        motionPath: { path: `${this.target} .pathFront` }\r\n      }, 0)\r\n      .progress(percent);\r\n\r\n  // 툴팁타임 업데이트\r\n  this._updateTooltipTime();\r\n  d3.select('.pathBack').attr('d',`M0 24 l ${moment(server_dtm).format('YYYY-MM-DD')  === moment(service_dtm).format('YYYY-MM-DD') ? this.width*limit_max : this.width} 0`);\r\n\r\n  // 드래그 이벤트 바인딩\r\n  if(this.drag !== null) {\r\n    console.log('drag kill')\r\n    this.drag[0].kill();\r\n  }\r\n\r\n  // 드래그이벤트 정의\r\n  onThrowUpdate = onDrag = () => {\r\n    let c = Math.abs(this.drag[0].x / this.width); // c === this.timestamp.percent;\r\n    this.current = c > 1 ? 1 : c;\r\n    this.timeline.progress(c);\r\n    // 툴팁타임 업데이트\r\n    this._updateTooltipTime();\r\n\r\n  };\r\n  onDragEnd = () => {\r\n    // 버블 업데이트...\r\n    /!*let { service_dtm, server_dtm } = this.data.time,\r\n        t, d = moment(service_dtm).format('YYYY-MM-DD');*!/\r\n    /!**\r\n     * data > 프로그래스 업데이트\r\n     * 프로그래스 범위가  00:00 ~ 다음날 00:00 까지 지정할 수 있으므로 \r\n     * 다음날  00:00 드래그 후 달력 > 다음 날짜 로 업데이트시 하루 더 지난 상태로 업데이트 된다\r\n     * 따라서 업데이트 날짜가 서버시간을 초과를 막는다.\r\n     *!/\r\n    /!*t = moment(this.covert).format('YYYY-MM-DD HH:mm:ss').split(' ').pop();\r\n    if(t === '00:00:00' && this.AMPM === 'PM') {\r\n      d = moment(server_dtm).format('YYYY-MM-DD')\r\n    }\r\n    this.data.time.progress_dtm = `${d} ${t}`;*!/\r\n    console.log('this.data.time.progress_dtm',this.data.time.progress_dtm)\r\n    // 키워드 업데이트\r\n    //bb.update(this.data.time.progress_dtm);\r\n  }\r\n\r\n  this.drag = Draggable.create('.timeGroup', {\r\n    bounds: {\r\n      minX: limit_min ? this.width * (limit_min + .0001) : 0, // * .0001 단위 필수\r\n      maxX: limit_max ? this.width * (limit_max + .0001) : 1, // * .0001 단위 필수\r\n      minY: 24,\r\n      maxY: 24,\r\n    },\r\n    type: 'x',\r\n    lockAxis:true,\r\n    throwProps: false,\r\n    liveSnap: true,\r\n    snap: {\r\n      x: (x) => {\r\n        let cc = (this.width / (24 - .0001))/6;\r\n        return Math.floor(x / (cc)) * cc; // * .0001 단위 필수\r\n      }\r\n    },\r\n    onThrowUpdate,\r\n    onDrag,\r\n    onDragEnd,\r\n    onDragStart() {\r\n      if(typeof ndrclick === 'function') {\r\n        ndrclick('TOT00');\r\n      }\r\n    }\r\n  })\r\n});*/\r\n","import { tfech } from \"./utils\";\r\n\r\n\r\nexport default class Data {\r\n    constructor() {\r\n        this.keywordList;\r\n        this.time = {\r\n            min_dtm: '2020-08-20 09:00:00', // 20200820오픈 기준, 데이터 이전이 없으므로\r\n            progress_dtm: null,\r\n            server_dtm: null,\r\n            service_dtm: null,\r\n            update_dtm: null\r\n        };\r\n        this.items = new Map();\r\n    }\r\n    load(v) {\r\n        const path =  v ? `${KEYWORD_URL}?service_dtm=${v}` : KEYWORD_URL;\r\n        tfech(path).then(res => {\r\n            this.update(res)\r\n        })\r\n    }\r\n    /**\r\n     * @parms 서버 응답 값 {object}\r\n     */\r\n    update(v) {\r\n        if (!v || typeof v !== 'object') {\r\n            throw 'response parameter error'\r\n        }\r\n        let { server_dtm, service_dtm, update_dtm, data } = v;\r\n\r\n        this.keywordList = data;\r\n        this.time.progress_dtm = this.time.progress_dtm || server_dtm;\r\n        this.time.server_dtm = server_dtm;\r\n        this.time.service_dtm = service_dtm;\r\n        this.time.update_dtm = update_dtm;\r\n\r\n        for(let [name, inst] of this.items) {\r\n            if('render' in inst) inst.render();\r\n        }\r\n\r\n    }\r\n}","const utils = {\r\n  _ownKeys: function(object, enumerableOnly) {\r\n    var keys = Object.keys(object);\r\n\r\n    if (Object.getOwnPropertySymbols) {\r\n      var symbols = Object.getOwnPropertySymbols(object);\r\n\r\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\r\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\r\n      });\r\n\r\n      keys.push.apply(keys, symbols);\r\n    }\r\n    return keys;\r\n  },\r\n  _objectSpread: function(target) {\r\n    for (var i = 1; i < arguments.length; i++) {\r\n      var source = arguments[i] != null ? arguments[i] : {};\r\n\r\n      if (i % 2) {\r\n        utils._ownKeys(Object(source), true).forEach(function (key) {\r\n          utils._defineProperty(target, key, source[key]);\r\n        });\r\n      } else if (Object.getOwnPropertyDescriptors) {\r\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\r\n      } else {\r\n        utils._ownKeys(Object(source)).forEach(function (key) {\r\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\r\n        });\r\n      }\r\n    }\r\n    return target;\r\n  },\r\n  _defineProperty: function(obj, key, value) {\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n    return obj;\r\n  },\r\n  debounce: function (func, wait, immediate) {\r\n    var timeout;\r\n\r\n    return function () {\r\n      var context = this,\r\n          args = arguments;\r\n      var later = function () {\r\n        timeout = null;\r\n        if (!immediate) func.apply(context, args);\r\n      };\r\n      var callNow = immediate && !timeout;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n      if (callNow) func.apply(context, args);\r\n    };\r\n  },\r\n  getRandomIntInclusive: function (min, max, dec) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n\r\n    if (!dec) return Math.floor(Math.random() * (max - min + 1)) + min;\r\n    else return Math.random() * 1;\r\n  },\r\n  shuffleArray: function(array) {\r\n    var result = [].concat(array);\r\n\r\n    for (var i = result.length - 1; i > 0; i--) {\r\n      var j = Math.floor(Math.random() * (i + 1));\r\n      var temp = result[i];\r\n      result[i] = result[j];\r\n      result[j] = temp;\r\n    }\r\n\r\n    return result;\r\n  },\r\n  dateFormat: function(convertTime, locale) {\r\n    locale = locale || 'Asia/Seoul';\r\n    return moment(convertTime).tz(locale).format();\r\n  },\r\n  isToday: function (time1, time2) {\r\n    return time1.split('T')[0] === time2.split('T')[0];\r\n  },\r\n  convertTime: function(convertTime, format) {\r\n    var time = new Date(convertTime);\r\n    var year = time.getFullYear();\r\n    var month = time.getMonth() + 1;\r\n    var date = time.getDate();\r\n    var hours = time.getHours();\r\n    var minutes = time.getMinutes();\r\n\r\n    if (date <= 9) date = '0' + date;\r\n    if (month <= 9) month = '0' + month;\r\n    if (hours <= 9) hours = '0' + hours;\r\n    if (minutes <= 9) minutes = '0' + minutes;\r\n\r\n    switch(format) {\r\n      case 'HM' :\r\n        return hours + ' : ' + minutes;\r\n      case 'YMD' :\r\n        return year +'-'+ month +'-'+ date;\r\n      case 'YMDH' :\r\n        return year +'-'+ month +'-'+ date +' '+ hours +':00:00';\r\n      case 'YMDHM' :\r\n        return year +'-'+ month +'-'+ date +' '+ hours +':'+ minutes +':00';\r\n      case 'STANDARD' :\r\n        return year +'.'+ month +'.'+ date +' '+ hours +':' + minutes +' 기준' ;\r\n    }\r\n  },\r\n  varOperator: function(operator, param1, param2) {\r\n    switch(operator) {\r\n      case 'prev':\r\n        return param1 - param2;\r\n      case 'next':\r\n        return param1 + param2;\r\n    }\r\n  },\r\n  RGBAToRGB: function(rgba) {\r\n    rgba = rgba.substr(5).split(')')[0].split(',');\r\n\r\n    var r = Math.round(((1 - rgba[3]) * 255) + (rgba[3] * rgba[0]));\r\n    var g = Math.round(((1 - rgba[3]) * 255) + (rgba[3] * rgba[1]));\r\n    var b = Math.round(((1 - rgba[3]) * 255) + (rgba[3] * rgba[2]));\r\n\r\n    return 'rgb('+ r +','+g+','+b+')';\r\n  },\r\n  withCommas: function(v) {\r\n    return v.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n  },\r\n  CopyUrlToClipboard: function(target) {\r\n    var shareLinkUrl = document.querySelector(target);\r\n    var isIOS = navigator.userAgent.match(/i(Phone|Pod)/i) !== null ? true : false;\r\n    var textArea;\r\n\r\n    function createTextArea(text) {\r\n      textArea = document.createElement('textArea');\r\n      textArea.readOnly = true;\r\n      textArea.contentEditable = true;\r\n      textArea.value = text;\r\n      document.body.appendChild(textArea);\r\n    }\r\n\r\n    function selectText() {\r\n      var range, selection;\r\n\r\n      if (isIOS) {\r\n        range = document.createRange();\r\n        range.selectNodeContents(textArea);\r\n        selection = window.getSelection();\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n        textArea.setSelectionRange(0, 9999);\r\n      } else {\r\n        textArea.select();\r\n      }\r\n    }\r\n\r\n    function copyTo() {\r\n      document.execCommand('copy');\r\n      document.body.removeChild(textArea);\r\n    }\r\n\r\n    function copyAlert() {\r\n      var alertEl = document.createElement('div');\r\n      alertEl.setAttribute('class', 'share-alert');\r\n\r\n      var alertInner = document.createElement('div');\r\n      alertInner.setAttribute('class', 'inner');\r\n\r\n      var alertText = document.createElement('p')\r\n      alertText.textContent = '링크를 클립보드에 복사하였습니다.';\r\n\r\n      var alertClose = document.createElement('button');\r\n      alertClose.setAttribute('type', 'button');\r\n      alertClose.textContent = '닫기';\r\n\r\n      var alertDimm = document.createElement('div');\r\n      alertDimm.setAttribute('class', 'dimm');\r\n\r\n      alertInner.appendChild(alertText);\r\n      alertInner.appendChild(alertClose);\r\n\r\n      alertEl.appendChild(alertDimm);\r\n      alertEl.appendChild(alertInner);\r\n\r\n      document.body.appendChild(alertEl);\r\n\r\n      alertClose.addEventListener('click', function() {\r\n        document.body.removeChild(alertEl);\r\n      });\r\n    }\r\n\r\n    createTextArea(shareLinkUrl.value);\r\n    selectText();\r\n    copyTo();\r\n    copyAlert();\r\n  }\r\n}\r\n\r\nconst tfech = (url) => {\r\n  return fetch(url).then(response => response.json()).catch(error => console.log('[tfech]',error));\r\n}\r\n\r\n\r\nexport {\r\n  utils,\r\n  tfech\r\n}"],"sourceRoot":""}